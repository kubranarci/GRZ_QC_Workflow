Changes in component 'nf-core/bwamem2/mem'
Changes in 'bwamem2/mem/environment.yml':
--- modules/nf-core/bwamem2/mem/environment.yml
+++ modules/nf-core/bwamem2/mem/environment.yml
@@ -6,7 +6,7 @@
 
 dependencies:
   # renovate: datasource=conda depName=bioconda/bwa-mem2
-  - bwa-mem2=2.2.1
+  - bwa-mem2=2.3
   # renovate: datasource=conda depName=bioconda/htslib
   - htslib=1.21
   # renovate: datasource=conda depName=bioconda/samtools

'modules/nf-core/bwamem2/mem/meta.yml' is unchanged
Changes in 'bwamem2/mem/main.nf':
--- modules/nf-core/bwamem2/mem/main.nf
+++ modules/nf-core/bwamem2/mem/main.nf
@@ -1,25 +1,25 @@
 process BWAMEM2_MEM {
-    tag "$meta.id"
+    tag "${meta.id}"
     label 'process_high'
 
     conda "${moduleDir}/environment.yml"
-    container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://community-cr-prod.seqera.io/docker/registry/v2/blobs/sha256/9a/9ac054213e67b3c9308e409b459080bbe438f8fd6c646c351bc42887f35a42e7/data' :
-        'community.wave.seqera.io/library/bwa-mem2_htslib_samtools:e1f420694f8e42bd' }"
+    container "${workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container
+        ? 'https://community-cr-prod.seqera.io/docker/registry/v2/blobs/sha256/f1/f12d80863d4600ccb2e76e339a6dd05e0394ce93cc8199b0d1ef146747ba86cc/data'
+        : 'community.wave.seqera.io/library/bwa-mem2_htslib_samtools:0be3a9a9fbf26332'}"
 
     input:
     tuple val(meta), path(reads)
     tuple val(meta2), path(index)
     tuple val(meta3), path(fasta)
-    val   sort_bam
+    val sort_bam
 
     output:
-    tuple val(meta), path("*.sam")  , emit: sam , optional:true
-    tuple val(meta), path("*.bam")  , emit: bam , optional:true
-    tuple val(meta), path("*.cram") , emit: cram, optional:true
-    tuple val(meta), path("*.crai") , emit: crai, optional:true
-    tuple val(meta), path("*.csi")  , emit: csi , optional:true
-    path  "versions.yml"            , emit: versions
+    tuple val(meta), path("*.sam"), emit: sam, optional: true
+    tuple val(meta), path("*.bam"), emit: bam, optional: true
+    tuple val(meta), path("*.cram"), emit: cram, optional: true
+    tuple val(meta), path("*.crai"), emit: crai, optional: true
+    tuple val(meta), path("*.csi"), emit: csi, optional: true
+    path "versions.yml", emit: versions
 
     when:
     task.ext.when == null || task.ext.when
@@ -31,21 +31,23 @@
     def samtools_command = sort_bam ? 'sort' : 'view'
 
     def extension_pattern = /(--output-fmt|-O)+\s+(\S+)/
-    def extension_matcher =  (args2 =~ extension_pattern)
+    def extension_matcher = (args2 =~ extension_pattern)
     def extension = extension_matcher.getCount() > 0 ? extension_matcher[0][2].toLowerCase() : "bam"
-    def reference = fasta && extension=="cram"  ? "--reference ${fasta}" : ""
-    if (!fasta && extension=="cram") error "Fasta reference is required for CRAM output"
+    def reference = fasta && extension == "cram" ? "--reference ${fasta}" : ""
+    if (!fasta && extension == "cram") {
+        error("Fasta reference is required for CRAM output")
+    }
 
     """
     INDEX=`find -L ./ -name "*.amb" | sed 's/\\.amb\$//'`
 
     bwa-mem2 \\
         mem \\
-        $args \\
-        -t $task.cpus \\
+        ${args} \\
+        -t ${task.cpus} \\
         \$INDEX \\
-        $reads \\
-        | samtools $samtools_command $args2 -@ $task.cpus ${reference} -o ${prefix}.${extension} -
+        ${reads} \\
+        | samtools ${samtools_command} ${args2} -@ ${task.cpus} ${reference} -o ${prefix}.${extension} -
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -59,14 +61,17 @@
     def args2 = task.ext.args2 ?: ''
     def prefix = task.ext.prefix ?: "${meta.id}"
     def extension_pattern = /(--output-fmt|-O)+\s+(\S+)/
-    def extension_matcher =  (args2 =~ extension_pattern)
+    def extension_matcher = (args2 =~ extension_pattern)
     def extension = extension_matcher.getCount() > 0 ? extension_matcher[0][2].toLowerCase() : "bam"
-    if (!fasta && extension=="cram") error "Fasta reference is required for CRAM output"
+    if (!fasta && extension == "cram") {
+        error("Fasta reference is required for CRAM output")
+    }
 
     def create_index = ""
     if (extension == "cram") {
         create_index = "touch ${prefix}.crai"
-    } else if (extension == "bam") {
+    }
+    else if (extension == "bam") {
         create_index = "touch ${prefix}.csi"
     }
 

'modules/nf-core/bwamem2/mem/tests/main.nf.test' is unchanged
'modules/nf-core/bwamem2/mem/tests/main.nf.test.snap' is unchanged
************************************************************
